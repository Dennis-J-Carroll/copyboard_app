# Copyboard Context Menu Integration Guide

This document explains how the Copyboard extension integrates with your system's right-click context menu, allowing you to:
1. Copy items to your clipboard board directly from the context menu
2. Paste any of your saved clipboard items by selecting them from the context menu

## How Context Menu Integration Works

Context menu integration is highly dependent on your operating system and desktop environment. On Linux, each desktop environment (GNOME, KDE, XFCE, etc.) has its own method for adding custom actions to the right-click menu:

1. **GNOME (Nautilus)**: Uses Python extensions through the `nautilus-python` system
2. **KDE (Dolphin)**: Uses desktop files in the `.local/share/kservices5/ServiceMenus` directory
3. **XFCE (Thunar)**: Uses custom actions configured in `~/.config/Thunar/uca.xml`
4. **MATE (Caja)**: Uses action files in `~/.local/share/caja/actions`

Each method connects your file manager's context menu to the Copyboard functionality through different mechanisms.

## Installing the Context Menu Integration

To install the integration, we've created a simple command:

```bash
copyboard-install-integration
```

This command detects your desktop environment and installs the appropriate integration files.

## Understanding the Components

### 1. GNOME/Nautilus Integration

For Nautilus (GNOME's file manager), we create a Python plugin that:
- Adds a "Copyboard" submenu to the right-click menu
- Provides options to copy the current selection to the clipboard board
- Lists all clipboard items for pasting

**Key files**:
- `nautilus-copyboard.py`: The Python extension that interfaces with Nautilus
- `install-nautilus-extension.sh`: Script to install the extension in the right location

### 2. KDE/Dolphin Integration

For KDE's Dolphin file manager, we create service menu files that:
- Add Copyboard actions to the right-click menu
- Create dynamic menus that update based on clipboard content

**Key files**:
- `copyboard-kde-service.desktop`: Static menu entries for copying to the board and launching the GUI
- `install-kde-service.sh`: Script to install the service menu and set up a dynamic generator

### 3. Other Environments (XFCE/Thunar, MATE/Caja)

For other environments, we create custom actions or action files that connect to Copyboard:
- Thunar uses XML-based custom actions
- Caja uses desktop files in a specific directory

**Key files**:
- Various environment-specific configuration files generated by the installation script

## How to Use the Context Menu Integration

Once installed, you can use Copyboard from the right-click menu:

1. **To copy an item to the board**:
   - Right-click on text, a file, or a selection
   - Select "Copy to Clipboard Board" from the Copyboard submenu
   - The item will be added to your clipboard board

2. **To paste an item from the board**:
   - Right-click where you want to paste
   - Hover over the "Copyboard" submenu
   - Select the specific clipboard item you want to paste

3. **To open the Copyboard GUI**:
   - Right-click anywhere
   - Select "Open Copyboard" from the Copyboard submenu

## Troubleshooting

If the context menu integration doesn't appear:

1. Try logging out and back in to reload your desktop environment
2. Check if the required dependencies are installed:
   - For GNOME: `nautilus-python` package
   - For other environments: specific plugin packages may be required
3. Run the installation command again with debugging output:
   ```bash
   copyboard-install-integration --debug
   ```

## Technical Implementation Details

The integration works by connecting your file manager's extension mechanism to the Copyboard's core functionality. When you select an option from the context menu:

1. The file manager runs the associated command or script
2. The command imports the Copyboard module and calls the appropriate function
3. The Copyboard module performs the requested operation on the clipboard board

This creates a seamless experience where you can manage multiple clipboard items directly from your context menu.
